<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>3D Home Configurator with Pricing</title>
<link rel="stylesheet" href="css/styles.css?v=20251016-1">
<style>
/* Loading splash overlay with elegant animations */
#loading-overlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(135deg, #0a0e1a 0%, #1a1f35 100%);
  color: #e2e8f0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  transition: opacity 0.8s ease;
  animation: fadeIn 0.6s ease;
}
#loading-overlay.hide {
  opacity: 0;
  pointer-events: none;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}
#loading-card {
  width: min(520px, 90vw);
  padding: 40px 32px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(0, 122, 204, 0.1);
  animation: slideUp 0.8s ease;
}
#loading-title {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  letter-spacing: 1px;
  text-align: center;
  background: linear-gradient(135deg, #60a5fa, #3b82f6, #2563eb);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmer 3s ease infinite;
}
#loading-subtitle {
  font-size: 14px;
  color: #94a3b8;
  text-align: center;
  margin-bottom: 32px;
  font-weight: 400;
}
#loading-bar {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.08);
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
  position: relative;
}
#loading-bar-inner {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #3b82f6, #60a5fa, #3b82f6);
  background-size: 200% 100%;
  animation: shimmer 2s linear infinite;
  transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 999px;
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
}
#loading-text {
  margin-top: 16px;
  font-size: 13px;
  color: #cbd5e1;
  text-align: center;
  animation: pulse 2s ease infinite;
}
#loading-list {
  margin-top: 24px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
#loading-continue {
  display: none;
  margin-top: 24px;
  align-self: center;
  padding: 10px 24px;
  border: 1px solid rgba(59, 130, 246, 0.5);
  border-radius: 8px;
  background: rgba(59, 130, 246, 0.1);
  color: #60a5fa;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
}
#loading-continue:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: #60a5fa;
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  transform: translateY(-2px);
}
</style>
</head>
<body>

<div id="controls">
		<button onclick="addNewRoom()">+ Add Room</button>
        <!-- Render button removed -->
	<!-- Custom Level Dropdown (replaces native select) -->
	<div id="levelDropdown" class="dropdown" aria-label="Level Menu">
		<button id="levelButton" class="dropdown-button" type="button">
			<span id="levelButtonText">Ground Floor</span>
			<span class="caret">
				<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
			</span>
		</button>
		<div id="levelList" class="dropdown-list" role="menu">
			<div class="dropdown-item" data-value="0">Ground Floor</div>
			<div class="dropdown-item" data-value="1">First Floor</div>
			<div class="dropdown-item separator" aria-hidden="true"></div>
			<div class="dropdown-item" data-value="stairs">+ Stairs</div>
			<div class="dropdown-item" data-value="pergola">+ Pergola</div>
			<div class="dropdown-item" data-value="garage">+ Garage</div>
			<div class="dropdown-item" data-value="roof">+ Roof</div>
			<div class="dropdown-item" data-value="pool">+ Pool</div>
			<div class="dropdown-item" data-value="balcony">+ Balcony</div>
		</div>
	</div>
	<!-- Hidden native select kept for fallback and API compatibility -->
	<select id="levelSelect" onchange="switchLevel()" style="display:none">
		<option value="0">Ground Floor</option>
		<option value="1">First Floor</option>
		<option value="stairs">+ Stairs</option>
		<option value="pergola">+ Pergola</option>
		<option value="garage">+ Garage</option>
		<option value="roof">+ Roof</option>
		<option value="pool">+ Pool</option>
		<option value="balcony">+ Balcony</option>
	</select>
	<button class="secondary" onclick="showResetConfirmation()">Reset</button>
	<button class="secondary" onclick="showPricing()" title="Show pricing">üí∞ Price</button>
	<button id="btn-floorplan" class="secondary" title="Open 2D floor plan editor">üìê Floor Plan</button>
	<div id="actionsDropdown" class="dropdown" aria-label="Main Menu">
		<button id="actionsButton" class="dropdown-button" type="button">
			<span>Main Menu</span>
			<span class="caret">
				<svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L6 6L11 1" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
			</span>
		</button>
		<div id="actionsList" class="dropdown-list" role="menu">
			<div class="dropdown-item" data-action="info">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" style="flex-shrink:0;">
					<circle cx="12" cy="12" r="10" stroke="#0f172a" stroke-width="2" fill="#ffffff"/>
					<path d="M12 17v-6" stroke="#0f172a" stroke-width="2" stroke-linecap="round"/>
					<circle cx="12" cy="7" r="1.5" fill="#0f172a"/>
				</svg>
				<span>Information</span>
			</div>
			<div class="dropdown-item" data-action="share">üîó Share</div>
			<div class="dropdown-item separator" aria-hidden="true"></div>
			<div class="dropdown-title">Export</div>
			<div class="dropdown-item" data-action="obj">‚¨á 3D - OBJ</div>
			<div class="dropdown-item" data-action="pdf">üìÑ PDF (Export Views)</div>
			<div class="dropdown-item" data-action="json-download">‚¨á JSON</div>
			<div class="dropdown-item separator" aria-hidden="true"></div>
			<div class="dropdown-title">Import</div>
			<div class="dropdown-item" data-action="obj-upload">‚¨Ü 3D - OBJ</div>
			<div class="dropdown-item" data-action="pdf-floorplan-upload">‚¨Ü Floorplan (PDF)</div>
			<div class="dropdown-item" data-action="svg-floorplan-upload">‚¨Ü Floorplan (SVG)</div>
			<div class="dropdown-item" data-action="json-upload">‚¨Ü JSON</div>
		</div>
	</div>
</div>

<canvas id="canvas"></canvas>
<div id="labels-3d"></div>
<div id="status">Ready</div>


<div id="measurements">
	<h3>Object Measurements</h3>
	<div class="measurement-item">
		<span class="measurement-label">Name:</span>
		<input class="measurement-input" id="input-name" type="text" maxlength="60" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Width (X):</span>
		<input class="measurement-input" id="input-width" type="number" step="0.1" min="1" max="40" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Depth (Z):</span>
		<input class="measurement-input" id="input-depth" type="number" step="0.1" min="1" max="40" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Height (Y):</span>
		<input class="measurement-input" id="input-height" type="number" step="0.1" min="0.5" max="10" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Position X:</span>
		<input class="measurement-input" id="input-pos-x" type="number" step="0.1" min="-100" max="100" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Position Z:</span>
		<input class="measurement-input" id="input-pos-z" type="number" step="0.1" min="-100" max="100" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Floor:</span>
		<span class="measurement-value" id="measure-floor">--</span>
	</div>
	<button id="save-measurements" style="margin-top:10px;padding:6px 16px;">Save</button>
</div>

<!-- Room palette modal for adding furniture -->
<div id="room-palette-modal" style="display:none;">
	<div id="room-palette-content">
		<button class="close-button" onclick="hideRoomPalette()">&times;</button>
		<div id="room-palette-left">
			<h3 id="room-palette-title">Room</h3>
			<canvas id="room-preview-canvas" width="360" height="260"></canvas>
		</div>
		<div id="room-palette-right">
			<h3>Furniture List</h3>
			<div style="display:flex; gap:8px; align-items:center; justify-content:center; margin-bottom:8px;">
				<button class="secondary" id="palette-clear" title="Clear preview items">Clear</button>
				<button id="palette-commit" title="Add preview items to room">Add to Room</button>
			</div>
			<div id="palette-list"></div>
		</div>
	</div>
	<div id="room-palette-backdrop" onclick="hideRoomPalette()"></div>
	</div>

<div id="info-modal">
	<div id="info-content">
		<button class="close-button" onclick="hideInfo()">&times;</button>
		<h2>3D Home Configurator</h2>
		<p><strong>Camera Controls:</strong></p>
		<ul>
			<li>Drag to rotate view</li>
			<li>Shift + Drag to pan</li>
			<li>Mouse wheel to zoom in/out</li>
		</ul>
		<p><strong>Building:</strong></p>
		<ul>
			<li>Click "+ Add Room" to create new rooms</li>
			<li>Use dropdown to add stairs, pergolas, garages, or roofs</li>
			<li>Click room labels to select and drag objects</li>
			<li>Drag colored handles to resize selected objects</li>
		</ul>
		<p><strong>Keyboard:</strong></p>
		<ul>
			<li>Escape - Clear selection</li>
			<li>Delete - Remove selected object</li>
		</ul>
	</div>
</div>

<!-- Share URL Modal -->
<div id="share-modal" style="display:none; position:fixed; inset:0; z-index:11000; align-items:center; justify-content:center;">
	<div id="share-backdrop" style="position:absolute; inset:0; background:rgba(0,0,0,0.45);" onclick="hideShare()"></div>
	<div id="share-content" style="position:relative; width:min(720px, 95vw); background:#fff; border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,0.25); display:flex; flex-direction:column; overflow:hidden;">
		<div style="display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid #e5e7eb; background:#f8fafc;">
			<strong style="flex:1">Share Link</strong>
			<button class="secondary" onclick="hideShare()" title="Close">‚úï</button>
		</div>
		<div style="padding:12px; display:flex; flex-direction:column; gap:10px;">
			<div style="font-size:13px; color:#334155;">Open your share link in a new tab. In Codespaces, this will be the forwarded URL.</div>
			<div style="display:flex; gap:8px; align-items:center;">
				<a id="share-open" class="secondary" style="text-decoration:none; display:inline-flex; align-items:center; padding:6px 10px; border-radius:8px; border:1px solid #cbd5e1;" target="_blank" rel="noopener">Open</a>
			</div>
			<div id="share-hint" style="font-size:12px; color:#64748b;"></div>
		</div>
	</div>
  
</div>

<input type="file" id="upload-file" accept="application/json" style="display:none" />
<input type="file" id="upload-obj-file" accept=".obj" style="display:none" />
<input type="file" id="upload-pdf-floorplan" accept="application/pdf" style="display:none" />
<input type="file" id="upload-svg-floorplan" accept="image/svg+xml,.svg" style="display:none" />

<!-- Floorplan Import Modal -->
<div id="floorplan-modal" style="display:none; position:fixed; inset:0; z-index:10000; align-items:center; justify-content:center;">
	<div id="floorplan-backdrop" style="position:absolute; inset:0; background:rgba(0,0,0,0.45);"></div>
	<div id="floorplan-content" style="position:relative; width: min(1200px, 95vw); height: calc(100vh - 40px); max-height:100vh; background:#fff; border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,0.25); display:flex; flex-direction:column; overflow:hidden;">
		<div style="display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid #e5e7eb; background:#f8fafc;">
			<strong style="flex:1">Import Floorplan (PDF)</strong>
			<button id="floorplan-close" class="secondary" title="Close">‚úï</button>
		</div>
		<div style="display:flex; min-height:0; height:100%;">
			<div style="flex:1; position:relative; background:#0b1020; display:flex; align-items:stretch; justify-content:stretch;">
				<canvas id="floorplan-canvas" style="width:100%; height:100%; background:#0b1020; display:block;"></canvas>
				<canvas id="floorplan-overlay" style="position:absolute; inset:0; pointer-events:none;"></canvas>
			</div>
			<div style="width:280px; border-left:1px solid #e5e7eb; padding:10px; display:flex; flex-direction:column; gap:10px; background:#fff; overflow:auto;">
				<div style="display:flex; align-items:center; gap:6px;">
					<span style="font-size:12px; color:#374151;">Page</span>
					<button id="fp-page-prev" class="secondary" title="Previous page">‚óÄ</button>
					<input id="fp-page-input" type="number" min="1" value="1" style="width:56px;" />
					<span style="font-size:12px; color:#374151;">/ <span id="fp-page-total">1</span></span>
					<button id="fp-page-next" class="secondary" title="Next page">‚ñ∂</button>
				</div>
				<div>
					<div style="font-weight:600; margin-bottom:6px;">Steps</div>
					<ol style="margin:0 0 6px 18px; padding:0;">
						<li>Calibrate scale: click two points, enter real distance</li>
						<li>Draw rooms: drag to place rectangles</li>
						<li>Commit rooms to scene</li>
					</ol>
				</div>
				<div style="display:flex; gap:6px; flex-wrap:wrap;">
					<button id="fp-mode-calibrate">Calibrate</button>
					<button id="fp-mode-place">Place Room</button>
					<button id="fp-undo" class="secondary">Undo</button>
					<button id="fp-refine-detect" class="secondary" title="Re-run automatic detection">Refine Detect</button>
				</div>
				<div style="display:flex; flex-direction:column; gap:6px;">
					<label style="font-size:12px; color:#374151;">Real distance (m) for last two clicks</label>
					<input id="fp-real-distance" type="number" min="0.1" max="1000" step="0.1" value="1.0" />
					<button id="fp-apply-scale" class="secondary">Apply Scale</button>
				</div>
				<div style="display:flex; flex-direction:column; gap:4px; background:#f8fafc; padding:8px; border:1px solid #e5e7eb; border-radius:8px;">
					<div style="font-size:12px; font-weight:600; color:#1e293b; display:flex; align-items:center; gap:4px;">Auto Detection</div>
					<label style="font-size:11px; color:#475569; display:flex; flex-direction:column; gap:2px;">Min Room (m)
						<input id="fp-auto-min" type="number" step="0.5" min="1" value="2" style="width:100%; font-size:11px;" />
					</label>
					<label style="font-size:11px; color:#475569; display:flex; flex-direction:column; gap:2px;">Max Aspect Ratio
						<input id="fp-auto-ar" type="number" step="0.5" min="2" value="8" style="width:100%; font-size:11px;" />
					</label>
					<label style="font-size:11px; color:#475569; display:flex; flex-direction:column; gap:2px;">Border Ink ‚â•
						<input id="fp-auto-border" type="number" step="0.05" min="0" max="1" value="0.15" style="width:100%; font-size:11px;" />
					</label>
				</div>
				<div style="font-size:12px; color:#374151;">
					<div>Scale: <span id="fp-scale-display">‚Äî</span> px/m</div>
					<div>Rooms queued: <span id="fp-rooms-count">0</span></div>
				</div>
				<div style="margin-top:auto; display:flex; gap:8px;">
					<button id="fp-commit" style="flex:1;">Commit to Scene</button>
					<button id="fp-cancel" class="secondary">Cancel</button>
				</div>
			</div>
		</div>
	</div>
  
</div>

<div id="pricing-modal">
	<div id="pricing-content">
		<button class="close-button" onclick="hidePricing()">&times;</button>
		<h2>Project Pricing</h2>
			<div style="display:flex; gap:12px; flex-wrap:wrap; align-items:flex-end; margin:8px 0 12px; padding:10px; background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px;">
				<label style="font-size:12px; color:#374151; display:flex; flex-direction:column; gap:4px;">
					Concrete thickness (mm)
					<input id="pricing-slab-mm" type="number" min="50" max="300" step="5" value="100" style="width:120px;" />
				</label>
				<label style="font-size:12px; color:#374151; display:flex; flex-direction:column; gap:4px;">
					Soil rate ($/m¬≥)
					<input id="pricing-soil-per-m3" type="number" min="0" step="10" value="600" style="width:120px;" />
				</label>
				<button id="pricing-apply" class="secondary" title="Apply pricing settings">Apply</button>
			</div>
		<div id="pricing-breakdown">
			<div class="pricing-section">
				<h3>Rooms</h3>
				<div id="room-pricing"></div>
			</div>
			<div class="pricing-section">
				<h3>Additional Components</h3>
				<div id="component-pricing"></div>
			</div>
			<div class="pricing-section">
				<h3>Concrete & Site Works</h3>
				<div id="concrete-pricing"></div>
			</div>
			<div class="pricing-section total-section">
				<h3>Total Estimate</h3>
				<div id="total-pricing"></div>
			</div>
		</div>
	</div>
</div>

<!-- Splash/progress overlay (non-deferred to show immediately) -->
<script src="js/boot/splash.js?v=20251026-2"></script>
<!-- Coordinated bootstrap: loads all modules with progress, then starts app -->
<script src="js/boot/bootstrap.js?v=20251026-1"></script>
<!-- Optional smoke tests (enable 2D editor smoke with ?smoke2d=1 in URL) -->
<script src="js/smoke/smoke2d.js?v=20251027-1"></script>


<!-- 2D Floor Plan Editor Modal -->
<div id="plan2d-page" style="display:none; position:fixed; inset:0; z-index:2;">
	<div id="plan2d-content" style="position:absolute; inset:0; width: 100%; height: 100vh; background:repeating-linear-gradient(0deg,#111827,#111827 28px,#1e293b 28px,#1e293b 56px), repeating-linear-gradient(90deg,#111827,#111827 28px,#1e293b 28px,#1e293b 56px); display:flex; flex-direction:column; overflow:hidden;">
		<div id="plan2d-header" style="display:flex; align-items:center; gap:10px; padding:10px 14px; background:transparent; border-bottom:none;">
			<div style="flex:1; display:flex; justify-content:center;">
				<div style="display:flex; flex-direction:column; align-items:center; gap:6px;">
					<div class="plan2d-floor-toggle" role="group" aria-label="Switch Floor">
						<button id="plan2d-floor-ground" type="button" title="Switch to Ground Floor">Ground</button>
						<button id="plan2d-floor-first" type="button" title="Switch to First Floor">First</button>
					</div>
					<div id="plan2d-compass" aria-label="North" title="North" style="width:28px; height:28px; border:1px solid #cbd5e1; border-radius:50%; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.25); user-select:none;">
						<svg width="12" height="12" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
							<polygon points="12,3 16,11 12,9 8,11" fill="#e2e8f0"/>
							<circle cx="12" cy="12" r="2" fill="#94a3b8"/>
						</svg>
					</div>
				</div>
			</div>
			<div id="plan2d-toolbar-right" style="display:flex; gap:6px; align-items:flex-start;">
				<div id="plan2d-wall-group" style="display:flex; flex-direction:column; align-items:center; gap:4px;">
					<button id="plan2d-tool-wall" class="secondary" title="Draw Walls (300mm thick)">Wall</button>
					<div style="font-size:11px; color:#ffffff; line-height:1;">
						<span>Scale: </span><span id="plan2d-scale">1:100</span>
					</div>
				</div>
				<button id="plan2d-tool-window" class="secondary" title="Draw Windows (thin line)">Window</button>
				<button id="plan2d-tool-door" class="secondary" title="Draw Doors">Door</button>
				<button id="plan2d-tool-select" class="secondary" title="Select elements to edit/delete">Select</button>
				<button id="plan2d-tool-erase" class="secondary" title="Erase elements">Erase</button>
				<!-- View utilities: fit and flip orientation -->
				<button id="plan2d-fit" class="secondary" title="Fit view to current 2D content">Fit</button>
				<button id="plan2d-flip-y" class="secondary" title="Flip vertical to mirror 3D orientation">Flip Y</button>
				<button id="plan2d-clear" class="secondary" title="Clear drawing">Clear</button>
				<button id="plan2d-close" class="secondary" title="Close">‚úï</button>
			</div>
		</div>
		<div style="display:flex; flex:1; min-height:0;">
			<div style="flex:1; position:relative; background:#0b1020;">
				<canvas id="plan2d-canvas" style="position:absolute; inset:0; width:100%; height:100%; display:block; cursor:crosshair; z-index:1; background:repeating-linear-gradient(0deg,#111827,#111827 28px,#1e293b 28px,#1e293b 56px), repeating-linear-gradient(90deg,#111827,#111827 28px,#1e293b 28px,#1e293b 56px);"></canvas>
				<canvas id="plan2d-overlay" style="position:absolute; inset:0; pointer-events:none; z-index:2;"></canvas>
				<canvas id="labels-2d" style="position:absolute; inset:0; pointer-events:none; z-index:3;"></canvas>
				<!-- Floating side overlay for Apply/Import/Export (frees full canvas width) -->
				<div id="plan2d-side-overlay" style="position:absolute; right:16px; top:72px; z-index:4; display:flex; flex-direction:column; gap:8px; background:rgba(15,23,42,0.85); border:1px solid rgba(148,163,184,0.35); border-radius:10px; padding:10px; backdrop-filter: blur(2px);">
					<button id="plan2d-apply-3d" title="Apply this floor plan to the 3D design">Apply to 3D</button>
					<button id="plan2d-export" title="Export plan JSON">Export JSON</button>
					<button id="plan2d-import" class="secondary" title="Import plan JSON">Import JSON</button>
					<input type="file" id="plan2d-import-file" accept="application/json" style="display:none;">
					<div id="plan2d-window-type" style="display:none; margin-top:4px;">
						<label for="plan2d-window-type-select" style="display:block; font-size:11px; color:#e2e8f0; margin-bottom:4px;">Window type</label>
						<select id="plan2d-window-type-select" style="width:100%; font-size:12px; padding:4px 6px; border-radius:6px; border:1px solid #94a3b8; background:#0b1020; color:#e2e8f0;">
							<option value="standard">Standard (sill 1.0m, height 1.5m)</option>
							<option value="full">Full height (floor to ceiling)</option>
						</select>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>

<!-- Reset Confirmation Modal -->
<div id="reset-confirmation-modal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.75); z-index:20000; align-items:center; justify-content:center;">
	<div style="background:#ffffff; border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,0.4); max-width:440px; width:90%; padding:32px 28px; animation:slideUp 0.3s ease;">
		<div style="text-align:center; margin-bottom:24px;">
			<div style="width:64px; height:64px; margin:0 auto 16px; background:linear-gradient(135deg, #ef4444, #dc2626); border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 8px 20px rgba(239,68,68,0.3);">
				<svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
			</div>
			<h2 style="font-size:24px; font-weight:700; color:#111827; margin-bottom:8px;">Reset Everything?</h2>
			<p style="font-size:15px; color:#6b7280; line-height:1.6;">This will permanently delete all your work including rooms, furniture, and settings. This action cannot be undone.</p>
		</div>
		<div style="display:flex; gap:12px;">
			<button id="reset-cancel-btn" class="secondary" style="flex:1; padding:12px; font-size:15px; font-weight:600;">Cancel</button>
			<button id="reset-confirm-btn" style="flex:1; padding:12px; font-size:15px; font-weight:600; background:#ef4444; border:none; color:#ffffff; border-radius:8px; cursor:pointer; transition:all 0.2s;">Yes, Reset Everything</button>
		</div>
	</div>
</div>

<script>
// Reset confirmation dialog
function showResetConfirmation() {
	const modal = document.getElementById('reset-confirmation-modal');
	if (modal) {
		modal.style.display = 'flex';
		modal.classList.remove('hidden');
	}
}

function hideResetConfirmation() {
	const modal = document.getElementById('reset-confirmation-modal');
	if (modal) {
		modal.style.display = 'none';
		modal.classList.add('hidden');
	}
}

function confirmReset() {
	// Call the existing resetAll function
	if (typeof resetAll === 'function') {
		resetAll();
	}
	// Refresh the page to fully clear everything
	setTimeout(() => {
		location.reload();
	}, 100);
}

// Wire up modal buttons
document.addEventListener('DOMContentLoaded', () => {
	const cancelBtn = document.getElementById('reset-cancel-btn');
	const confirmBtn = document.getElementById('reset-confirm-btn');
	const modal = document.getElementById('reset-confirmation-modal');
	
	if (cancelBtn) {
		cancelBtn.addEventListener('click', hideResetConfirmation);
	}
	
	if (confirmBtn) {
		confirmBtn.addEventListener('click', confirmReset);
	}
	
	// Close modal when clicking backdrop
	if (modal) {
		modal.addEventListener('click', (e) => {
			if (e.target === modal) {
				hideResetConfirmation();
			}
		});
	}
});
</script>

</body>
</html>


