<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>3D Home Configurator with Pricing</title>
<link rel="stylesheet" href="css/styles.css?v=dev">
</head>
<body>

<div id="controls">
		<button onclick="addNewRoom()">+ Add Room</button>
        <!-- Render button removed -->
	<select id="levelSelect" onchange="switchLevel()">
		<option value="0">Ground Floor</option>
		<option value="1">First Floor</option>
		<option value="stairs">Add Stairs</option>
		<option value="pergola">Add Pergola</option>
		<option value="garage">Add Garage</option>
		<option value="roof">Add Roof</option>
		<option value="balcony">Add Balcony</option>
	</select>
	<button class="secondary" onclick="resetAll()">Reset</button>
	<button class="secondary" onclick="showPricing()" title="Show pricing">ðŸ’° Price</button>
	<button class="secondary" onclick="showInfo()" title="Show information">â„¹</button>
	<select id="actionsMenu" title="Actions Menu">
		<option value="" selected disabled>â˜° Menu</option>
		<option value="save">ðŸ’¾ Save</option>
		<option value="load">ðŸ“‚ Load</option>
		<option value="obj">â¬‡ 3D - OBJ</option>
		<option value="obj-upload">â¬† 3D - OBJ</option>
		<option value="pdf">ðŸ“„ PDF</option>
		<option value="json-download">â¬‡ JSON</option>
		<option value="json-upload">â¬† JSON</option>
		<option disabled>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</option>
	</select>
</div>

<canvas id="canvas" width="1200" height="800" style="border:1px solid #ccc; background:#f8fbff; display:block; margin:20px auto;"></canvas>
<div id="labels"></div>
<div id="status">Ready</div>

<div id="measurements">
	<h3>Object Measurements</h3>
	<div class="measurement-item">
		<span class="measurement-label">Name:</span>
		<input class="measurement-input" id="input-name" type="text" maxlength="60" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Width (X):</span>
		<input class="measurement-input" id="input-width" type="number" step="0.1" min="1" max="20" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Depth (Z):</span>
		<input class="measurement-input" id="input-depth" type="number" step="0.1" min="1" max="20" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Height (Y):</span>
		<input class="measurement-input" id="input-height" type="number" step="0.1" min="0.5" max="10" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Position X:</span>
		<input class="measurement-input" id="input-pos-x" type="number" step="0.1" min="-100" max="100" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Position Z:</span>
		<input class="measurement-input" id="input-pos-z" type="number" step="0.1" min="-100" max="100" />
	</div>
	<div class="measurement-item">
		<span class="measurement-label">Floor:</span>
		<span class="measurement-value" id="measure-floor">--</span>
	</div>
	<button id="save-measurements" style="margin-top:10px;padding:6px 16px;">Save</button>
</div>

<div id="info-modal">
	<div id="info-content">
		<button class="close-button" onclick="hideInfo()">&times;</button>
		<h2>3D Home Configurator</h2>
		<p><strong>Camera Controls:</strong></p>
		<ul>
			<li>Drag to rotate view</li>
			<li>Shift + Drag to pan</li>
			<li>Mouse wheel to zoom in/out</li>
		</ul>
		<p><strong>Building:</strong></p>
		<ul>
			<li>Click "+ Add Room" to create new rooms</li>
			<li>Use dropdown to add stairs, pergolas, garages, or roofs</li>
			<li>Click room labels to select and drag objects</li>
			<li>Drag colored handles to resize selected objects</li>
		</ul>
		<p><strong>Keyboard:</strong></p>
		<ul>
			<li>Escape - Clear selection</li>
			<li>Delete - Remove selected object</li>
		</ul>
	</div>
</div>

<div id="pricing-modal">
	<div id="pricing-content">
		<button class="close-button" onclick="hidePricing()">&times;</button>
		<h2>Project Pricing</h2>
		<div id="pricing-breakdown">
			<div class="pricing-section">
				<h3>Rooms</h3>
				<div id="room-pricing"></div>
			</div>
			<div class="pricing-section">
				<h3>Additional Components</h3>
				<div id="component-pricing"></div>
			</div>
			<div class="pricing-section total-section">
				<h3>Total Estimate</h3>
				<div id="total-pricing"></div>
			</div>
		</div>
	</div>
</div>

<input type="file" id="upload-file" accept="application/json" style="display:none" />
<input type="file" id="upload-obj-file" accept=".obj" style="display:none" />

<div id="pricing-modal">
	<div id="pricing-content">
		<button class="close-button" onclick="hidePricing()">&times;</button>
		<h2>Project Pricing</h2>
		<div id="pricing-breakdown">
			<div class="pricing-section">
				<h3>Rooms</h3>
				<div id="room-pricing"></div>
			</div>
			<div class="pricing-section">
				<h3>Additional Components</h3>
				<div id="component-pricing"></div>
			</div>
			<div class="pricing-section total-section">
				<h3>Total Estimate</h3>
				<div id="total-pricing"></div>
			</div>
		</div>
	</div>
</div>

<!-- jsPDF for multi-page PDF export -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="js/app.js?v=dev"></script>

</body>
</html>
