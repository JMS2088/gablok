/* ========================================
   APPLE DESIGN SYSTEM - SPLASH/LOADING SCREEN
   Apple-styled splash overlay with glass material
   ======================================== */

/* === SPLASH OVERLAY - Light Cloud Pattern === */
#splash {
  position: fixed !important;
  inset: 0 !important;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.4) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.3) 0%, transparent 50%),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.35) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(255,255,255,0.4) 0%, transparent 50%),
    linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  font-family: var(--apple-font-family) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  z-index: 10000 !important; /* Higher than all UI elements */
  transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
  animation: splash-fade-in 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: all !important; /* Block all interactions until hidden */
}

[data-theme="dark"] #splash {
  background: linear-gradient(135deg, #1a1d23 0%, #2d3748 100%) !important;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.02) 0%, transparent 50%),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.025) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(255,255,255,0.03) 0%, transparent 50%),
    linear-gradient(135deg, #1a1d23 0%, #2d3748 100%) !important;
}

#splash.splash-hide {
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Old progress bar and message styles removed - now using centered percentage and DNA helix */

/* === PERCENTAGE TEXT - Large Center Display === */
.splash-percent {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-family: var(--apple-font-family) !important;
  font-size: 500px !important;
  font-weight: 700 !important;
  line-height: 1 !important;
  letter-spacing: -0.03em !important;
  color: rgba(160, 174, 192, 0.1) !important;
  z-index: 100 !important;
  text-shadow: none !important;
}

[data-theme="dark"] .splash-percent {
  color: rgba(213, 222, 237, 0.1) !important;
  text-shadow: none !important;
}

/* === MODULE LIST - 3D Rotating DNA Helix === */
.splash-module-list {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) rotateX(24deg) rotateY(0deg) !important;
  width: 1020px !important;
  height: 680px !important;
  display: block !important;
  pointer-events: none !important;
  transform-style: preserve-3d !important;
  perspective: 1800px !important;
}

[data-theme="dark"] .splash-module-list > div {
  background: rgba(45, 55, 72, 0.8) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* Dark mode gradient colors for depth perception */
.splash-module-list > div {
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform-origin: center center !important;
  transform-style: preserve-3d !important;
  transition: opacity 0.4s ease;
}

.splash-helix-connector {
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  height: 2px !important;
  border-radius: 999px !important;
  --connector-rgb: 255,255,255;
  background: linear-gradient(90deg, rgba(var(--connector-rgb), 0), rgba(var(--connector-rgb), 0.8), rgba(var(--connector-rgb), 0)) !important;
  opacity: 0.4;
  transform-origin: center center !important;
  pointer-events: none !important;
  filter: drop-shadow(0 0 6px rgba(var(--connector-rgb), 0.45));
}

.splash-helix-connector.is-pending {
  --connector-rgb: 255,255,255;
}

.splash-helix-connector.is-loading {
  --connector-rgb: 209,213,219;
}

.splash-helix-connector.is-loaded {
  --connector-rgb: 156,200,255;
}

[data-theme="dark"] .splash-helix-connector.is-loaded {
  --connector-rgb: 140,197,255;
}

/* DNA cell: floating capsule containing keyline + label */
.splash-module-cell {
  display: inline-flex !important;
  align-items: center !important;
  gap: 5px !important;
  padding: 0 !important;
  border-radius: 0 !important;
  background: transparent !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border: none !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  letter-spacing: 0.01em !important;
  color: #ffffff !important;
  white-space: nowrap !important;
  opacity: var(--helix-opacity, 0.6);
  box-shadow: none !important;
  transition: opacity 0.4s ease, color 0.4s ease, background-color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease !important;
  position: relative !important;
}

.splash-module-keyline {
  display: inline-block !important;
  width: 6px !important;
  height: 6px !important;
  border-radius: 50% !important;
  background: currentColor !important;
  box-shadow: 0 0 8px currentColor !important;
}

.splash-module-label {
  display: inline-block !important;
}

/* Helix positioning for modules is now controlled dynamically in splash.js */


.splash-module-cell.is-pending {
  color: #ffffff !important;
}

.splash-module-cell.is-loading {
  color: #d1d5db !important;
}

.splash-module-cell.is-loaded {
  color: #9cc8ff !important;
  opacity: 1 !important;
  background: transparent !important;
  box-shadow: none !important;
}

[data-theme="dark"] .splash-module-cell.is-loaded {
  color: #8cc5ff !important;
}

/* === LOADED MODULE - Highlighted DNA cell (dark grey / accent) === */
.splash-module-cell.is-loaded .splash-module-keyline {
  box-shadow: 0 0 10px currentColor !important;
}

/* Connect even-numbered pills back to the left strand to suggest the zipped DNA ladder */
/* Crosslinks handled visually via depth/animation */



/* === LOADING SPINNER (if used elsewhere) === */
.spinner,
#visualize-loading {
  font-family: var(--apple-font-family) !important;
  font-size: var(--apple-font-size-body) !important;
  font-weight: var(--apple-font-weight-regular) !important;
  line-height: var(--apple-line-height-relaxed) !important;
  letter-spacing: var(--apple-tracking-normal) !important;
  color: var(--apple-secondary-label) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 20px !important;
}

[data-theme="dark"] .spinner,
[data-theme="dark"] #visualize-loading {
  color: var(--apple-secondary-label) !important;
}

/* === VISUALIZE LOADING OVERLAY === */
#visualize-loading {
  position: absolute;
  inset: 0;
  background: var(--apple-material-regular);
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  z-index: 10;
  display: none;
}

[data-theme="dark"] #visualize-loading {
  background: var(--apple-material-regular);
}

#visualize-loading[style*="display: flex"],
#visualize-loading[style*="display:flex"] {
  display: flex !important;
}

/* === ANIMATION - Elegant Loading Effects === */
@keyframes splash-fade-in {
  0% {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  100% {
    opacity: 1;
    backdrop-filter: blur(20px);
  }
}

@keyframes module-fade-in {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 0.5;
    transform: scale(1);
  }
}

@keyframes module-loaded {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1.05);
  }
}

.splash-module-list > div[style*="opacity:1"],
.splash-module-list > div[style*="opacity: 1"] {
  animation: module-loaded 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* === PERFORMANCE OPTIMIZATIONS === */
#splash,
.splash-progress-bar,
.splash-module-list > div {
  will-change: opacity, transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}
