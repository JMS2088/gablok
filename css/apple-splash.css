/* ========================================
   APPLE DESIGN SYSTEM - SPLASH/LOADING SCREEN
   Apple-styled splash overlay with glass material
   ======================================== */

/* === SPLASH OVERLAY - Light Cloud Pattern === */
#splash {
  position: fixed !important;
  inset: 0 !important;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.4) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.3) 0%, transparent 50%),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.35) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(255,255,255,0.4) 0%, transparent 50%),
    linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%) !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  font-family: var(--apple-font-family) !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  z-index: 10000 !important; /* Higher than all UI elements */
  transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
  animation: splash-fade-in 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: all !important; /* Block all interactions until hidden */
}

[data-theme="dark"] #splash {
  background: linear-gradient(135deg, #1a1d23 0%, #2d3748 100%) !important;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.02) 0%, transparent 50%),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.025) 0%, transparent 50%),
    radial-gradient(circle at 70% 80%, rgba(255,255,255,0.03) 0%, transparent 50%),
    linear-gradient(135deg, #1a1d23 0%, #2d3748 100%) !important;
}

#splash.splash-hide {
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Old progress bar and message styles removed - now using centered percentage and DNA helix */

/* === PERCENTAGE TEXT - Large Center Display === */
.splash-percent {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-family: var(--apple-font-family) !important;
  font-size: 72px !important;
  font-weight: 700 !important;
  line-height: 1 !important;
  letter-spacing: -0.03em !important;
  color: #2d3748 !important;
  z-index: 10001 !important;
  text-shadow: 0 2px 20px rgba(255,255,255,0.5) !important;
}

[data-theme="dark"] .splash-percent {
  color: #f5f7fa !important;
  text-shadow: 0 2px 20px rgba(0,0,0,0.5) !important;
}

/* === MODULE LIST - 3D Rotating DNA Helix === */
.splash-module-list {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  width: 800px !important;
  height: 600px !important;
  display: block !important;
  pointer-events: none !important;
  transform-style: preserve-3d !important;
  perspective: 1000px !important;
  animation: dna-container-rotate 20s linear infinite !important;
}

[data-theme="dark"] .splash-module-list {
  /* Inherited from parent */
}

[data-theme="dark"] .splash-module-list > div {
  background: rgba(45, 55, 72, 0.7) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
}

/* Dark mode grey variations for depth */
[data-theme="dark"] .splash-module-list > div:nth-child(1),
[data-theme="dark"] .splash-module-list > div:nth-child(17) { color: #4b5563 !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(3),
[data-theme="dark"] .splash-module-list > div:nth-child(15) { color: #6b7280 !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(5),
[data-theme="dark"] .splash-module-list > div:nth-child(13) { color: #9ca3af !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(7),
[data-theme="dark"] .splash-module-list > div:nth-child(11) { color: #d1d5db !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(9) { color: #e5e7eb !important; }

[data-theme="dark"] .splash-module-list > div:nth-child(2),
[data-theme="dark"] .splash-module-list > div:nth-child(18) { color: #d1d5db !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(4),
[data-theme="dark"] .splash-module-list > div:nth-child(16) { color: #9ca3af !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(6),
[data-theme="dark"] .splash-module-list > div:nth-child(14) { color: #6b7280 !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(8),
[data-theme="dark"] .splash-module-list > div:nth-child(12) { color: #4b5563 !important; }
[data-theme="dark"] .splash-module-list > div:nth-child(10) { color: #374151 !important; }

.splash-module-list > div {
  position: absolute !important;
  padding: 6px 14px !important;
  border-radius: 20px !important;
  background: rgba(255, 255, 255, 0.7) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  font-size: var(--apple-font-size-caption1) !important;
  font-weight: var(--apple-font-weight-medium) !important;
  white-space: nowrap !important;
  opacity: 0 !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  transform-style: preserve-3d !important;
  left: 50% !important;
  transform-origin: center center !important;
}

/* DNA Helix 3D positioning - creates double helix spiral with depth */
/* Left strand - darker greys (further back) */
.splash-module-list > div:nth-child(1) { top: 5%; transform: translateX(-150px) translateZ(-100px) rotateY(-15deg); color: #b8bfc7 !important; animation: helix-rotate-1 20s linear infinite; }
.splash-module-list > div:nth-child(3) { top: 15%; transform: translateX(-120px) translateZ(-50px) rotateY(-10deg); color: #a5adb5 !important; animation: helix-rotate-3 20s linear infinite; }
.splash-module-list > div:nth-child(5) { top: 25%; transform: translateX(-80px) translateZ(0px) rotateY(-5deg); color: #929aa3 !important; animation: helix-rotate-5 20s linear infinite; }
.splash-module-list > div:nth-child(7) { top: 35%; transform: translateX(-40px) translateZ(50px) rotateY(0deg); color: #7f8791 !important; animation: helix-rotate-7 20s linear infinite; }
.splash-module-list > div:nth-child(9) { top: 45%; transform: translateX(0px) translateZ(100px) rotateY(5deg); color: #6c747f !important; animation: helix-rotate-9 20s linear infinite; }
.splash-module-list > div:nth-child(11) { top: 55%; transform: translateX(40px) translateZ(50px) rotateY(10deg); color: #7f8791 !important; animation: helix-rotate-11 20s linear infinite; }
.splash-module-list > div:nth-child(13) { top: 65%; transform: translateX(80px) translateZ(0px) rotateY(5deg); color: #929aa3 !important; animation: helix-rotate-13 20s linear infinite; }
.splash-module-list > div:nth-child(15) { top: 75%; transform: translateX(120px) translateZ(-50px) rotateY(0deg); color: #a5adb5 !important; animation: helix-rotate-15 20s linear infinite; }
.splash-module-list > div:nth-child(17) { top: 85%; transform: translateX(150px) translateZ(-100px) rotateY(-5deg); color: #b8bfc7 !important; animation: helix-rotate-17 20s linear infinite; }

/* Right strand - lighter greys (closer/in front) */
.splash-module-list > div:nth-child(2) { top: 10%; transform: translateX(150px) translateZ(100px) rotateY(15deg); color: #6c747f !important; animation: helix-rotate-2 20s linear infinite; }
.splash-module-list > div:nth-child(4) { top: 20%; transform: translateX(120px) translateZ(50px) rotateY(10deg); color: #7f8791 !important; animation: helix-rotate-4 20s linear infinite; }
.splash-module-list > div:nth-child(6) { top: 30%; transform: translateX(80px) translateZ(0px) rotateY(5deg); color: #929aa3 !important; animation: helix-rotate-6 20s linear infinite; }
.splash-module-list > div:nth-child(8) { top: 40%; transform: translateX(40px) translateZ(-50px) rotateY(0deg); color: #a5adb5 !important; animation: helix-rotate-8 20s linear infinite; }
.splash-module-list > div:nth-child(10) { top: 50%; transform: translateX(0px) translateZ(-100px) rotateY(-5deg); color: #b8bfc7 !important; animation: helix-rotate-10 20s linear infinite; }
.splash-module-list > div:nth-child(12) { top: 60%; transform: translateX(-40px) translateZ(-50px) rotateY(-10deg); color: #a5adb5 !important; animation: helix-rotate-12 20s linear infinite; }
.splash-module-list > div:nth-child(14) { top: 70%; transform: translateX(-80px) translateZ(0px) rotateY(-5deg); color: #929aa3 !important; animation: helix-rotate-14 20s linear infinite; }
.splash-module-list > div:nth-child(16) { top: 80%; transform: translateX(-120px) translateZ(50px) rotateY(0deg); color: #7f8791 !important; animation: helix-rotate-16 20s linear infinite; }
.splash-module-list > div:nth-child(18) { top: 90%; transform: translateX(-150px) translateZ(100px) rotateY(5deg); color: #6c747f !important; animation: helix-rotate-18 20s linear infinite; }

.splash-module-list > div:nth-child(n+19) { top: 95%; left: 50%; transform: translateX(-50%) translateZ(0); color: #9ca3af !important; }

[data-theme="dark"] .splash-module-list > div {
  background: var(--apple-tertiary-system-background) !important;
}

/* === LOADED MODULE - Highlighted in DNA Helix === */
.splash-module-list > div[style*="opacity:1"],
.splash-module-list > div[style*="opacity: 1"] {
  opacity: 1 !important;
  color: var(--apple-label) !important;
  font-weight: var(--apple-font-weight-semibold) !important;
  background: var(--apple-blue) !important;
  color: white !important;
  box-shadow: 0 2px 12px var(--apple-blue-alpha-40), 0 0 20px var(--apple-blue-alpha-20) !important;
  transform: scale(1.05) !important;
}

[data-theme="dark"] .splash-module-list > div[style*="opacity:1"],
[data-theme="dark"] .splash-module-list > div[style*="opacity: 1"] {
  background: var(--apple-blue) !important;
  color: white !important;
  box-shadow: 0 2px 12px var(--apple-blue-alpha-50), 0 0 25px var(--apple-blue-alpha-30) !important;
}

/* === LOADING SPINNER (if used elsewhere) === */
.spinner,
#visualize-loading {
  font-family: var(--apple-font-family) !important;
  font-size: var(--apple-font-size-body) !important;
  font-weight: var(--apple-font-weight-regular) !important;
  line-height: var(--apple-line-height-relaxed) !important;
  letter-spacing: var(--apple-tracking-normal) !important;
  color: var(--apple-secondary-label) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 20px !important;
}

[data-theme="dark"] .spinner,
[data-theme="dark"] #visualize-loading {
  color: var(--apple-secondary-label) !important;
}

/* === VISUALIZE LOADING OVERLAY === */
#visualize-loading {
  position: absolute;
  inset: 0;
  background: var(--apple-material-regular);
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  z-index: 10;
  display: none;
}

[data-theme="dark"] #visualize-loading {
  background: var(--apple-material-regular);
}

#visualize-loading[style*="display: flex"],
#visualize-loading[style*="display:flex"] {
  display: flex !important;
}

/* === ANIMATION - Elegant Loading Effects === */
@keyframes splash-fade-in {
  0% {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  100% {
    opacity: 1;
    backdrop-filter: blur(20px);
  }
}

/* Removed old animations - replaced with DNA helix animations */

@keyframes dna-container-rotate {
  0% { transform: translate(-50%, -50%) rotateY(0deg); }
  100% { transform: translate(-50%, -50%) rotateY(360deg); }
}

@keyframes helix-rotate-1 { 0%, 100% { transform: translateX(-150px) translateZ(-100px) rotateY(-15deg); } 50% { transform: translateX(-150px) translateZ(-100px) rotateY(165deg); } }
@keyframes helix-rotate-2 { 0%, 100% { transform: translateX(150px) translateZ(100px) rotateY(15deg); } 50% { transform: translateX(150px) translateZ(100px) rotateY(195deg); } }
@keyframes helix-rotate-3 { 0%, 100% { transform: translateX(-120px) translateZ(-50px) rotateY(-10deg); } 50% { transform: translateX(-120px) translateZ(-50px) rotateY(170deg); } }
@keyframes helix-rotate-4 { 0%, 100% { transform: translateX(120px) translateZ(50px) rotateY(10deg); } 50% { transform: translateX(120px) translateZ(50px) rotateY(190deg); } }
@keyframes helix-rotate-5 { 0%, 100% { transform: translateX(-80px) translateZ(0px) rotateY(-5deg); } 50% { transform: translateX(-80px) translateZ(0px) rotateY(175deg); } }
@keyframes helix-rotate-6 { 0%, 100% { transform: translateX(80px) translateZ(0px) rotateY(5deg); } 50% { transform: translateX(80px) translateZ(0px) rotateY(185deg); } }
@keyframes helix-rotate-7 { 0%, 100% { transform: translateX(-40px) translateZ(50px) rotateY(0deg); } 50% { transform: translateX(-40px) translateZ(50px) rotateY(180deg); } }
@keyframes helix-rotate-8 { 0%, 100% { transform: translateX(40px) translateZ(-50px) rotateY(0deg); } 50% { transform: translateX(40px) translateZ(-50px) rotateY(180deg); } }
@keyframes helix-rotate-9 { 0%, 100% { transform: translateX(0px) translateZ(100px) rotateY(5deg); } 50% { transform: translateX(0px) translateZ(100px) rotateY(185deg); } }
@keyframes helix-rotate-10 { 0%, 100% { transform: translateX(0px) translateZ(-100px) rotateY(-5deg); } 50% { transform: translateX(0px) translateZ(-100px) rotateY(175deg); } }
@keyframes helix-rotate-11 { 0%, 100% { transform: translateX(40px) translateZ(50px) rotateY(10deg); } 50% { transform: translateX(40px) translateZ(50px) rotateY(190deg); } }
@keyframes helix-rotate-12 { 0%, 100% { transform: translateX(-40px) translateZ(-50px) rotateY(-10deg); } 50% { transform: translateX(-40px) translateZ(-50px) rotateY(170deg); } }
@keyframes helix-rotate-13 { 0%, 100% { transform: translateX(80px) translateZ(0px) rotateY(5deg); } 50% { transform: translateX(80px) translateZ(0px) rotateY(185deg); } }
@keyframes helix-rotate-14 { 0%, 100% { transform: translateX(-80px) translateZ(0px) rotateY(-5deg); } 50% { transform: translateX(-80px) translateZ(0px) rotateY(175deg); } }
@keyframes helix-rotate-15 { 0%, 100% { transform: translateX(120px) translateZ(-50px) rotateY(0deg); } 50% { transform: translateX(120px) translateZ(-50px) rotateY(180deg); } }
@keyframes helix-rotate-16 { 0%, 100% { transform: translateX(-120px) translateZ(50px) rotateY(0deg); } 50% { transform: translateX(-120px) translateZ(50px) rotateY(180deg); } }
@keyframes helix-rotate-17 { 0%, 100% { transform: translateX(150px) translateZ(-100px) rotateY(-5deg); } 50% { transform: translateX(150px) translateZ(-100px) rotateY(175deg); } }
@keyframes helix-rotate-18 { 0%, 100% { transform: translateX(-150px) translateZ(100px) rotateY(5deg); } 50% { transform: translateX(-150px) translateZ(100px) rotateY(185deg); } }

@keyframes module-fade-in {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 0.5;
    transform: scale(1);
  }
}

@keyframes module-loaded {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1.05);
  }
}

.splash-module-list > div[style*="opacity:1"],
.splash-module-list > div[style*="opacity: 1"] {
  animation: module-loaded 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* === PERFORMANCE OPTIMIZATIONS === */
#splash,
.splash-progress-bar,
.splash-module-list > div {
  will-change: opacity, transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}
